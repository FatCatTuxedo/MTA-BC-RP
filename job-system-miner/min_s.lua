ironMinerArea = createColCircle(603, 878, 250)function isPlayerInIronMinerArea(player)	if (isElementWithinColShape(player, ironMinerArea) and getElementData(player, "job") == 7) then		return true	end	return falseend factoryMarker = createMarker(274.39788818359, 1361.9630126953, 9.5859375, "cylinder", 15, 255, 255, 0, 150)factoryBlip = createBlipAttachedTo(factoryMarker, 18)setElementVisibleTo(factoryMarker, root, false)setElementVisibleTo(factoryBlip, root, false)setBlipVisibleDistance(factoryBlip, 600)function startJob()	if (getElementData(source, "job") == 7) then		triggerClientEvent(source, "Miner.JobStarting", source)	endendaddEvent("onPlayerGetJobMiner.JobStart", true)addEventHandler("onPlayerGetJobMiner.JobStart", root, startJob) function onFactoryMarkerHit(hitElement)	if (getElementType(hitElement) == "player") then		if (getElementData(hitElement, "job") == 7) then			if (isPedInVehicle(hitElement)) then  				playerVeh = getPedOccupiedVehicle(hitElement)				if (isElement(playerVeh)) then					if (getElementModel(playerVeh) == 573) then						sellIron(hitElement, getIron(hitElement))						setElementVelocity(playerVeh, 0, 0, 0)					elseif (not isPedInVehicle(hitElement)) then						triggerClientEvent(hitElement,"displayMesaage", hitElement, "You must be in a Dune to unload your iron!", 0, 255, 0)					elseif (getElementModel(getPedOccupiedVehicle(hitElement)) ~= 573) then												triggerClientEvent(hitElement,"displayMesaage", hitElement, "You must be in a Dune to unload your iron!", 0, 255, 0)					end				end			else				triggerClientEvent(hitElement,"displayMesaage", hitElement, "You must be in a Dune to unload your iron!", 0, 255, 0)			end		end	endendaddEventHandler("onMarkerHit",factoryMarker, onFactoryMarkerHit) function onGivePlayerIron()	local ironAmount = math.floor( math.random(56, 112))	if exports["item-system"]:giveItem( client, 211, ironAmount) then		triggerClientEvent(client,"displayMesaage", client, "You have extracted "..ironAmount.." grams of iron", 0, 255, 0)		if (not isElementVisibleTo (factoryMarker, client)) then			triggerClientEvent(client,"displayMesaage", client, "Now can sell the iron you extracted at the factory.", 0, 255, 0)			setElementVisibleTo(factoryMarker, client, true)			setElementVisibleTo(factoryBlip, client, true)		end	else		triggerClientEvent(client,"displayMesaage", client, "You cannot carry any more iron! Go and sell it at the factory!", 0, 255, 0)		if (not isElementVisibleTo (factoryMarker, client)) then			setElementVisibleTo(factoryMarker, client, true)			setElementVisibleTo(factoryBlip, client, true)		end	endendaddEvent("Miner.GiveIron", true)addEventHandler("Miner.GiveIron", root, onGivePlayerIron)function getIron(player)	local count = 0	for key, item in pairs(exports["item-system"]:getItems(player)) do 		if item[1] == 211 then -- supply box			count = count + (tonumber(item[2]) or 0)		end	end	return countendfunction sellIron(player, iron)	if (iron < 1) then		outputChatBox("You don't have iron!", player, 255, 0, 0)		return	end	local mAmount = math.floor( (iron / 2) * math.random(1, 7))		for key, item in pairs(exports["item-system"]:getItems(player)) do 		if item[1] == 211 then			if tonumber(item[2]) then					exports["item-system"]:takeItem(player, 211,item[2])			end		end	end	local formartedEarned = exports.global:formatMoney(tostring(mAmount))			exports.global:giveMoney(player, mAmount)	endaddEvent("Miner.SellIron", true)addEventHandler("Miner.SellIron", root, sellIron)function hideWindows()	if (getElementData(source, "job") == 7) then		triggerClientEvent(source, "Miner.hidewindowsonquit", source)		if (isElementVisibleTo(factoryMarker, source)) then			setElementVisibleTo(factoryMarker, source, false)			setElementVisibleTo(factoryBlip, source, false)		end	endendaddEventHandler("Miner.Resign", root, hideWindows)function getCurrentIron()	iron = getIron()	triggerClientEvent(client, "Miner.output", client, iron)endaddEvent("Miner.myIron", true)addEventHandler("Miner.myIron", root, getCurrentIron)function checkOnLogin()	if (getElementData(source, "job") == 7) then		triggerClientEvent(source, "Miner.StartJobOnLogin", source)	else		setElementVisibleTo(factoryBlip, source, false)		setElementVisibleTo(factoryMarker, source, false)	endendaddEventHandler("onPlayerLogin", root, checkOnLogin, true, "low")		