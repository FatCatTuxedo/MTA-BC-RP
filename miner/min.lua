minePositions = {   [1] =  {618.80377197266, 812.12829589844, -42.9609375}, [2] =  {464.93414306641, 867.1044921875, -27.700733184814}, [3] =  {498.2151184082, 925.62121582031, -29.032382965088}, [4] =  {492.20651245117, 781.96221923828, -22.080993652344},    [5] =  {661.23040771484, 721.56958007813, -3.7197256088257},    [6] =  {515.67639160156, 970.63299560547, -24.346164703369},    [7] =  {557.46118164063, 927.14929199219, -42.948009490967},    [8] =  {539.74810791016, 832.63671875, -40.207672119141},   [9] =  {681.65795898438, 922.6865234375, -40.783580780029}, [10] =  {691.27923583984, 824.42498779297, -30.154132843018},   [11] =  {738.66833496094, 976.14410400391, 5.8201236724854},    [12] =  {645.49938964844, 988.64935302734, -7.4517698287964},   [13] =  {583.97265625, 937.49523925781, -42.9609375},   [14] =  {721.43304443359, 737.24884033203, -7.1243877410889},   [15] =  {712.92559814453, 945.57348632813, -18.733114242554},   [16] =  {629.35491943359, 1007.5104980469, 5.8156290054321},    [17] =  {570.90515136719, 794.67059326172, -28.739009857178},   [18] =  {573.99163818359, 759.65466308594, -16.237211227417},   [19] =  {779.81829833984, 892.36322021484, -1.3377237319946},   [20] =  {694.65618896484, 883.27349853516, -38.880668640137},   [21] =  {763.23333740234, 832.55383300781, -7.4462308883667},   [22] =  {463.59539794922, 818.75244140625, -9.0456418991089},}IMarea = createColCircle(603, 878, 250)local mineMarkerfunction onColShapeHit(hitElement) if (hitElement == localPlayer) then     if (getElementData(localPlayer, "cor.job") == "Iron Miner") then            startMineJob()      end endendaddEventHandler("onClientColShapeHit", IMarea, onColShapeHit)function onColShapeLeave(hitElement) if (hitElement == localPlayer) then     stopMineJob(true)   endendaddEventHandler("onClientColShapeLeave", IMarea, onColShapeLeave)function startMineJob()  if (not (isElement(mineMarker)) and getElementData(localPlayer, "cor.job") == "Iron Miner") then        local num = math.random(#minePositions)     mineMarker = createMarker(minePositions[num][1], minePositions[num][2], minePositions[num][3] -1, "cylinder", 1, 255, 255, 0, 150)      createBlipAttachedTo(mineMarker, 41)        addEventHandler("onClientMarkerHit", mineMarker, onMineMarkerHit)   endendaddEvent("CITmin.JobStarting", true)addEventHandler("CITmin.JobStarting", root, startMineJob)function stopMineJob(marker) if (isElement(mineMarker)) then     destroyElement(getAttachedElements(mineMarker)[1])      destroyElement(mineMarker)      mineMarker = nil        if (not marker) then            triggerServerEvent("CITmin.HideFactoryMarker", root)        end end if (minigameProgressBar) then       guiProgressBarSetProgress(minigameProgressBar, 0)   endendaddEvent("CITmin.JobStop", true)addEventHandler("CITmin.JobStop", root, stopMineJob)addEventHandler("onClientPlayerResign", root, stopMineJob)function getJobOnLogin()    if (getElementData(localPlayer, "cor.job") == "Iron Miner") then        if (isElementWithinColShape(localPlayer, IMarea)) then          startMineJob()      end endendaddEvent("CITminer.StartJobOnLogin", true)addEventHandler("CITminer.StartJobOnLogin", root, getJobOnLogin)function onMineMarkerHit(hitElement)    if (hitElement == localPlayer) then     if (isPedOnGround(localPlayer)) then            if not (isPedInVehicle(localPlayer)) then               destroyElement(getAttachedElements(source)[1])              destroyElement(source)              triggerEvent("CITmin.ShowMinigameGUI", localPlayer)         end     end endendfunction getCurrentIron() if (getElementData(localPlayer, "cor.job") == "Iron Miner") then        triggerServerEvent("Miner.myIron", root)    endendaddCommandHandler("currentiron", getCurrentIron)function outputIron(iron) exports.CORtexts:output("You currently have "..iron.." grams of iron", 0, 255, 0)endaddEvent("Miner.output", true)addEventHandler("Miner.output", root, outputIron)  